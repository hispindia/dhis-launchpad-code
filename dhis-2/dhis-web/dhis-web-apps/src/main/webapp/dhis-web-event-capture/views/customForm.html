<table style='width: 50%;'>
    <tr ng-if="selectedProgramStage.preGenerateUID">
        <td>
            {{'form_id'| translate}}
        </td>
        <td>
            <input type="text" ng-disabled="true" ng-model="currentEvent['uid']" style="width:99%;">
        </td>
    </tr>
    <tr>
        <td>
            {{selectedProgramStage.reportDateDescription ? selectedProgramStage.reportDateDescription : 'incident_date'| translate }}
        </td>
        <td>
            <input type="text"                                                   
                   placeholder="{{dhis2CalendarFormat.keyDateFormat}}"
                   d2-date
                   max-date='0'
                   ng-model="currentEvent.eventDate"
                   ng-disabled="editingEventInFull"    
                   ng-required="true" 
                   name="eventDate"/>
            <span ng-show="outerForm.submitted && outerForm.eventDate.$invalid" class="required">{{'date_required'| translate}}</span>
        </td>
    </tr>
    <tr ng-if="selectedProgramStage.captureCoordinates">
        <td>
            {{'lat_lng' | translate}}
        </td>
        <td>
            <span class="coordinate-container">
                <input type="number"
                   ng-model="currentEvent.coordinate.latitude"
                   placeholder="{{'latitude' | translate}}"    
                   name="latitude"
                   min="-90"
                   max="90"
                   ng-required="false"
                   style="min-width:128px"/>
                <span ng-show="outerForm.submitted && outerForm.latitude.$invalid" class="required">{{'int_required'| translate}} [-90 ... 90]</span>
            </span>
            <span class="coordinate-container">
                <input type="number"
                   ng-model="currentEvent.coordinate.longitude"                                                                
                   placeholder="{{'longitude' | translate}}" 
                   name="longitude" 
                   min="-180"
                   max="180"
                   ng-required="false"
                   style="min-width:128px"/>
                <span ng-show="outerForm.submitted && outerForm.longitude.$invalid" class="required">{{'int_required'| translate}}[-180 ... 180]</span>
            </span>
            <!--<span class='pull-right'>
                <a href ng-click="showMap(currentEvent)" title="{{'get_from_map'| translate}}"><i class="fa fa-map-marker fa-2x"></i></a>
            </span>-->
        </td>
    </tr>
</table>
<d2-custom-form custom-form-type="PROGRAM_STAGE" custom-form-object="selectedProgramStage"></d2-custom-form>
<div class="clear">
    <hr>
    <h4>
        {{'comments'| translate}}
    </h4>
    <textarea rows="3" ng-model="note.value" placeholder="{{'add_your_comment_here'| translate}}" style="width:50%;"></textarea>
    <div ng-if="currentEvent.notes">
        <table class="listTable dhis2-list-table-striped" style='width: 50%;'>
            <thead>
                <tr>
                    <th style="width:100%;">
                        {{'recorded_comments'| translate}}
                    </th>
                </tr>
            </thead>
            <tr ng-repeat="note in currentEvent.notes">
                <td class="over-flow-hidden" style="width:100%;">
                    <p>{{note.value}}</p>
                    <p><strong>{{'created_by'| translate}}: </strong>{{note.storedBy}}</p>
                    <p><strong>{{'date'| translate}}: </strong>{{note.storedDate}}</p>                    
                </td>
            </tr>
        </table>  
    </div>    
</div>
<!-- buttons for event registration / update begins -->
<div style="clear: both;">                        
    <span ng-if="editingEventInFull">
        <button ng-click="updateEvent()" class="button not-printable">{{'update'| translate}}</button>
        <button ng-click="showEventList()" class="button not-printable">{{'go_back'| translate}}</button>
    </span>
    <span ng-if="eventRegistration">
        <button ng-disabled="disableSaveAndAddNew" ng-click="addEvent(true)" class="button not-printable">{{'save_and_add_new'| translate}}</button>
        <button ng-click="addEvent()" class="button not-printable">{{'save_and_back'| translate}}</button>
        <button ng-click="showEventList(null)" class="button not-printable">{{'go_back'| translate}}</button>
    </span>
    <span ng-if="outerForm.submitted && outerForm.$invalid" class="horizontal-spacing red">{{'form_invalid' | translate}}</span>
</div>
<!-- buttons for event registration / update ends -->