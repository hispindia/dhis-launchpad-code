<!DOCTYPE html>
<html manifest="event-capture.appcache" ng-app="eventCapture">
    <head>
        <title>Event Capture</title>

        <meta name="description" content="DHIS 2">
        <meta name="keywords" content="DHIS 2">        
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.min.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/ui/jquery-ui.min.js"></script>        
        <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.tmpl.js"></script>      
        <link rel="stylesheet" type="text/css" href="../dhis-web-commons/javascripts/jQuery/ui/css/redmond/jquery-ui.css">    
        
        <script type="text/javascript" src="../dhis-web-commons/bootstrap/js/bootstrap.min.js"></script>        
                
        <script type="text/javascript" src="../dhis-web-commons/javascripts/angular/angular.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/angular/angular-resource.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/angular/angular-route.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/angular/angular-cookies.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/angular/angular-animate.js"></script>  
        <script type="text/javascript" src="../dhis-web-commons/javascripts/angular/ui-bootstrap-tpls-0.10.0-draggable-modal.js"></script>

        <script type="text/javascript" src="../dhis-web-commons/javascripts/moment/moment-with-langs.min.js"></script>       

        <script type="text/javascript" src="../dhis-web-commons/javascripts/underscore.min.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.util.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/commons.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/commons.ajax.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/lists.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/periodType.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/date.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/json2.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/validationRules.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.array.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.select.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.comparator.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.availability.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.trigger.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.sharing.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.validation.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.storage.ss.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.storage.ls.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.storage.idb.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.storage.memory.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.storage.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.contextmenu.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.appcache.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/ouwt/ouwt.js"></script>
        
        <script type="text/javascript" src="../dhis-web-commons/javascripts/angular/plugins/angularLocalStorage.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/angular/plugins/angular-translate.min.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/angular/plugins/angular-translate-loader-static-files.min.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/angular/plugins/angular-translate-loader-url.min.js"></script>

        <script type="text/javascript" src="scripts/event-capture.js"></script>
        <script type="text/javascript" src="scripts/app.js"></script>
        <script type="text/javascript" src="scripts/services.js"></script>
        <script type="text/javascript" src="scripts/directives.js"></script>
        <script type="text/javascript" src="scripts/controllers.js"></script>
        <script type="text/javascript" src="scripts/filters.js"></script>
        <script type="text/javascript" src="scripts/orgunitTreeSearch.js"></script>

        <!-- Menu scripts -->
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.translate.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.menu.js"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.menu.ui.js"></script>

        <link type="text/css" rel="stylesheet" href="../dhis-web-commons/font-awesome/css/font-awesome.min.css"/>
        <link type="text/css" rel="stylesheet" media="screen" href="../dhis-web-commons/css/light_blue/light_blue.css"/>
        <link type="text/css" rel="stylesheet" media="screen" href="../dhis-web-commons/css/widgets.css"/>     
        <link type="text/css" rel="stylesheet" media="screen" href="../dhis-web-commons/css/menu.css">
        
        <link type="text/css" rel="stylesheet" href="styles/style.css">

    </head>

    <body>
        <div id="header" ng-controller="HeaderController">
            <div class="container-heading">
                <img ng-click="home()" id="headerBanner" src="../dhis-web-commons/css/light_blue/logo_banner.png" style="cursor:pointer" title="{{'dhis2_home'| translate}}">                    
            </div>            
            <div id="headerMessage" class="bold"></div>

            <div d2-menu></div>

        </div>        
        
        <div ng-controller="MainController">
            
            <div id="leftBar"> 
                
                <div style="margin-top:20px">
                    

                    <img id="searchIcon" src="../images/search.png" style="cursor: pointer" title="{{ 'locate_organisation_unit_by_name' | translate}}">

                    <span id="searchSpan" style="width:100%;display:none;">
                            <input type="text" id="searchField" name="key" style="width:160px" />
                            <input type="button" value="Find" onclick="selection.findByName()" />
                    </span>
                </div>
                   
                <div id="orgUnitTree">
                    <ul>
                    </ul>
                </div>
                <img id="ouwt_loader" src="../images/ajax-loader-bar.gif"/>
            </div>
            
            <div class="page" id="mainPage" ng-show="selectedOrgUnit">
                <h3>
                    {{'event_capture'| translate}}
                </h3>
                
                <!-- selection begins-->
                <div>
                    <table>
                        <tr>
                            <td><label>{{'registering_unit'| translate}}</label></td>
                            <td><input type="text" class="fixed-width-text" selected-org-unit ng-model="selectedOrgUnit.name" value="{{selectedOrgUnit.name || 'please_select'| translate}}" disabled="" style="height:14px"></td>                        	                            
                        </tr>
                        <tr>
                            <td><label>{{'program'| translate}}</label></td>
                            <td>
                                <select id="programId" 
                                        class="fixed-width-select"
                                        name="programId" 
                                        ng-model="selectedProgram" 
                                        ng-options="program as program.name for program in programs | orderBy: 'name'" 
                                        ng-change="loadEvents()"
                                        ng-disabled="eventRegistration || editingEventInFull || editingEventInGrid">
                                    <option value="">{{'please_select'| translate}}</option>
                                </select>      
                            </td>
                            <td style='padding-left: 10px;'>
                                <button class="button button-std not-printable"
                                        ng-show="selectedProgramStage" 
                                        ng-click="showEventRegistration()" 
                                        ng-disabled="eventRegistration || editingEventInFull || editingEventInGrid">
                                    {{'register_event'| translate}}
                                </button>  
                            </td>
                            <td ng-if="(editingEventInFull || eventRegistration) && customForm" style='padding-left: 10px;'>
                                <button class="button button-std not-printable"
                                        ng-click="switchDataEntryForm()">
                                    {{displayCustomForm ? 'use_default_form' : 'use_custom_form'| translate}}
                                </button>  
                            </td>
                            <td ng-if="dhis2Events.length > 0" style='padding-left: 10px;'>
                                <button class="button button-std not-printable"
                                        onclick="javascript:window.print()">
                                    <span ng-if="!eventRegistration && !editingEventInFull">{{'print_list'| translate}}</span>
                                    <span ng-if="eventRegistration">{{'print_form'| translate}}</span>
                                    <span ng-if="editingEventInFull">{{'print_details'| translate}}</span>
                                </button>  
                            </td> 
                        </tr>                       
                    </table>
                </div>
                <!-- selection ends -->
                <div id="hideTypeAheadPopUp" ng-hide="true"></div>
                <!-- event grid begins -->
                <div ng-include="'views/eventList.html'"></div>
                <!-- event grid ends -->

                <!-- event update in full / registration begins-->
                <div>                
                    <form name="outerForm" novalidate>
                        <div ng-if="editingEventInFull || eventRegistration">
                            <h3>
                                <span ng-if="editingEventInFull">{{'event_details'| translate}}</span>                       
                                <span ng-if="eventRegistration">{{'new_event'| translate}}</span>                            
                            </h3>                            

                            <div class="bordered-div" ng-if="displayCustomForm">
                                <div ng-include="'views/customForm.html'"></div>  
                            </div>

                            <div class="bordered-div container-default-form" ng-if="!displayCustomForm">
                                <div ng-include="'views/defaultForm.html'"></div>                
                            </div>

                        </div>
                    </form>  
                </div>
                <!-- event update / registration ends -->                
            </div>            
        </div>
    </body>
</html>
