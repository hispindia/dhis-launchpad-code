## Macro for generating the jQuery validation rules 
#macro( validate $type $require )
  #if( $type == "NUMBER" || $type == "number" )
    {validate:{ number:true #if($require), required:true #end }}
  
	#elseif( $type == "int" )
  	{validate:{ integer:true #if($require), required:true #end }}
  	
  	#elseif( $type == "positiveNumber" )
  	{validate:{ positive_integer:true #if($require), required:true #end }}
  	
	#elseif( $type == "negativeNumber" )
  	{validate:{ negative_integer:true #if($require), required:true #end }}
  
  
  #elseif( $require )
    {validate:{required:true}}
  #end
#end






<!-- DATAELEMENTS WITH SECTIONS-->
#set( $tabIndex = 1 )
#if( $sections.size() > 0 )
	#foreach( $section in $sections )
		<table class="formSection" width="75%">
			<!--<tr><td>&nbsp;</td><td>&nbsp;</td></tr>-->
			<tr bgcolor="#CBDDEB">
				<th width="90%">$encoder.htmlEncode( $section.name )</th>
				<th style="text-align: center;width:10%">Value</th>
			</tr><br />
		
		#if ( $section.dataElements.size() > 0 )
			
			#set( $mark = false )
			#foreach($dataElement in $section.dataElements )
			#set( $incentiveDataValue = "" )
			#set( $incentiveDataValue = $!performanceIncentiveDataValueMap.get( $dataElement.id ) )
				<tr #alternate($mark)>
					<td width="90%"><label>$dataElement.getFormNameFallback()</label></td>
					<td width="10%">
						#if( $dataElement.type == "bool" )
							<select name="dataelement$dataElement.id"  id="dataelement$dataElement.id"  tabindex="$tabIndex">  
								<option value="">[$i18n.getString( "please_select" )]</option>            
								<option value="Yes" #if( $incentiveDataValue  == "Yes" ) selected="selected" #end >$i18n.getString( "yes" )</option>
								<option value="No" #if( $incentiveDataValue == "No") selected="selected" #end >$i18n.getString( "no" )</option>
							</select>                
						#elseif( $dataElement.type == "date" )
							<input type="text" id="dataelement$dataElement.id" name="dataelement$dataElement.id" value="$!incentiveDataValue" tabindex="$tabIndex" style="text-align: center;"> 
								<script type="text/javascript">
						  	 		datePickerValid( 'dataelement${dataElement.id}' );
								</script>                    
						
						#elseif( $!dataElement.optionSet )
							<select name="dataelement$dataElement.id"  id="dataelement$dataElement.id"  tabindex="$tabIndex">  
								<option value="">[$i18n.getString( "please_select" )]</option>
								#foreach ($option in $dataElement.optionSet.options )
									<option value="$option" #if($incentiveDataValue == $option ) selected="selected" #end>$option</option>
								#end	
							</select>                						
						
						#else 
							<input type="text" id="dataelement$dataElement.id" name="dataelement$dataElement.id" value="$!incentiveDataValue" tabindex="$tabIndex"  style="text-align: center;" #if($dataElement.type =='number')  class="{validate:{number:true}}" #elseif($dataElement.type =='int') class="{validate:{integer:true}}" #elseif($dataElement.type =='positiveNumber') class="{validate:{positive_integer:true}}" #elseif($dataElement.type =='negativeNumber') class="{validate:{negative_integer:true}}" #end/>
						#end
					</td>		
				</tr>
			#set( $tabIndex = $tabIndex + 1 )
			#set( $mark = !$mark)	
			#end
		#end
	</table>		
	<!--<br>-->
#end
	
#else	
<!-- DATAELEMENTS WITH NO SECTIONS-->
<table class="formSection" width="75%">

	<tr bgcolor="#CBDDEB">
		<td width="90%">$encoder.htmlEncode( $dataSet.getShortName() )</td>
		<td style="text-align: center;width:10%"><strong>Value</td>
	</tr>	
<br />
#set( $tabIndex = 1 )
#if ( $dataElements.size() > 0)
	#set( $mark = false )
	#foreach($dataElement in $dataElements )
	
	#set( $incentiveDataValue = "" )
	#set( $incentiveDataValue = $!performanceIncentiveDataValueMap.get( $dataElement.id ) )
		<tr #alternate($mark)>
			<!--#set( $dataEntryId = "${dataElement.id}" )-->
			<td width="90%"><label>$dataElement.getFormNameFallback()</label></td>
			<td width="10%">
				#if( $dataElement.type == "bool" )
					<select name="dataelement$dataElement.id"  id="dataelement$dataElement.id"  tabindex="$tabIndex">  
						<option value="">[$i18n.getString( "please_select" )]</option>            
						<option value="Yes" #if( $incentiveDataValue  == "Yes" ) selected="selected" #end >$i18n.getString( "yes" )</option>
						<option value="No" #if( $incentiveDataValue == "No") selected="selected" #end >$i18n.getString( "no" )</option>
					</select>                
				#elseif( $dataElement.type == "date" )
						<input type="text" id="dataelement$dataElement.id" name="dataelement$dataElement.id" value="$!incentiveDataValue" tabindex="$tabIndex" > 
						<script type="text/javascript">
						   datePickerValid( 'dataelement${dataElement.id}' );
						</script>                    
				
				#elseif( $!dataElement.optionSet )
					<select name="dataelement$dataElement.id"  id="dataelement$dataElement.id"  tabindex="$tabIndex" >  
						<option value="">[$i18n.getString( "please_select" )]</option>
						#foreach ($option in $dataElement.optionSet.options )
							<option value="$option" #if($incentiveDataValue == $option ) selected="selected" #end>$option</option>
						#end	
					</select>				
				
				#else 
					<input type="text" id="dataelement$dataElement.id" name="dataelement$dataElement.id" value="$!incentiveDataValue" tabindex="$tabIndex" style="text-align: center;" #if($dataElement.type =='number') class="{validate:{number:true}}" #elseif($dataElement.type =='int') class="{validate:{integer:true}}" #elseif($dataElement.type =='positiveNumber') class="{validate:{positive_integer:true}}" #elseif($dataElement.type =='negativeNumber') class="{validate:{negative_integer:true}}" #end/>
				#end
			</td>		
		</tr>
	#set( $tabIndex = $tabIndex + 1 )
	#set( $mark = !$mark)	
	#end
#end
</table>
	
#end

