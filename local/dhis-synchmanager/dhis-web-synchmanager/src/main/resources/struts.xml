<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

	<include file="dhis-web-commons.xml" />

	<package name="dhis-web-synchmanager" extends="dhis-web-commons"
		namespace="/dhis-web-synchmanager">

		<action name="testMetaData" class="org.hisp.dhis.sm.action.TestMetaData">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/index.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
		</action>


		<action name="index" class="org.hisp.dhis.sm.action.NoAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/index.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
			<param name="requiredAuthorities">F_SYNCHMANAGER_MANAGEMENT</param>
		</action>

		<action name="instanceList" class="org.hisp.dhis.sm.action.ConfigureInstancesAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/instanceList.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
			<param name="javascripts">scripts/instanceConfig.js</param>
			<param name="requiredAuthorities">F_SYNCHMANAGER_CONFIGURATION</param>
		</action>

		<action name="showInstanceForm" class="org.hisp.dhis.sm.action.ShowInstanceFormAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/instanceForm.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
			<param name="requiredAuthorities">F_SYNCHMANAGER_CONFIGURATION</param>
		</action>

		<action name="addInstance" class="org.hisp.dhis.sm.action.AddInstanceAction">
			<result name="success" type="redirect">instanceList.action?synchType=${synchType}
			</result>
		</action>

		<action name="showBusinessRulesForm"
			class="org.hisp.dhis.sm.action.ShowBusinessRulesFormAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/businessRulesForm.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
			<param name="requiredAuthorities">F_SYNCHMANAGER_CONFIGURATION</param>
		</action>

		<action name="setBusinessRules" class="org.hisp.dhis.sm.action.SetBusinessRulesAction">
			<result name="success" type="redirect">instanceList.action?synchType=${synchType}
			</result>
		</action>

		<action name="getInstance" class="org.hisp.dhis.sm.action.GetInstanceAction">
			<result name="success" type="velocity-json">/dhis-web-synchmanager/jsonInstance.vm
			</result>
			<param name="onExceptionReturn">plainTextError</param>
		</action>

		<action name="deleteInstance" class="org.hisp.dhis.sm.action.DeleteInstanceAction">
			<result name="success" type="velocity-json">/dhis-web-commons/ajax/jsonResponseSuccess.vm
			</result>
			<result name="error" type="velocity-json">/dhis-web-commons/ajax/jsonResponseError.vm
			</result>
			<param name="onExceptionReturn">plainTextError</param>
		</action>

		<action name="acceptanceList" class="org.hisp.dhis.sm.action.ShowAcceptanceListAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/dataelementAcceptanceList.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
			<param name="javascripts">scripts/instanceConfig.js</param>
			<param name="requiredAuthorities">F_SYNCHMANAGER_ACCEPTANCE</param>
		</action>


		<action name="synchMetaData"
			class="org.hisp.dhis.sm.action.SynchMetaDataResultAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/synchMetaDataResult.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
			<param name="javascripts">scripts/instanceConfig.js</param>
		</action>

		<!-- Synchronisation status page related actions -->

		<action name="syncStatusDesignForm"
			class="org.hisp.dhis.sm.action.SyncStatusFormDesignAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/SyncFilterForm.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
			<param name="requiredAuthorities">F_SYNCHMANAGER_SYNCH_STATUS</param>
		</action>

		<action name="approveDEStatusAction" class="org.hisp.dhis.sm.action.ApproveDEStatusAction">
			<param name="page">/dhis-web-synchmanager/approveDataElementList.vm</param>
			<result name="success" type="velocity">/content.vm</result>
		</action>

		<action name="approveIndicatorStatusAction"
			class="org.hisp.dhis.sm.action.ApproveIndicatorStatusAction">
			<param name="page">/dhis-web-synchmanager/approveIndicatorList.vm</param>
			<result name="success" type="velocity">/content.vm</result>
		</action>

		<action name="approveOrgUnitStatusAction"
			class="org.hisp.dhis.sm.action.ApproveOrgUnitStatusAction">
			<param name="page">/dhis-web-synchmanager/approveOrgUnitList.vm</param>
			<result name="success" type="velocity">/content.vm</result>
		</action>

		<action name="approveValidationRuleStatusAction"
			class="org.hisp.dhis.sm.action.ApproveValidationRuleStatusAction">
			<param name="page">/dhis-web-synchmanager/approveValidationRuleList.vm</param>
			<result name="success" type="velocity">/content.vm</result>
		</action>

		<action name="showDataElementAction" class="org.hisp.dhis.sm.action.GetDataElementAction">
			<param name="page">/dhis-web-synchmanager/showDataelement.vm</param>
			<result name="success" type="velocity">/content.vm</result>
		</action>

		<action name="showIndicatorAction" class="org.hisp.dhis.sm.action.GetIndicatorAction">
			<param name="page">/dhis-web-synchmanager/showIndicator.vm</param>
			<result name="success" type="velocity">/content.vm</result>
		</action>

		<action name="showOrgUnitAction" class="org.hisp.dhis.sm.action.GetOrgUnitAction">
			<param name="page">/dhis-web-synchmanager/showOrgUnit.vm</param>
			<result name="success" type="velocity">/content.vm</result>
		</action>

		<action name="showValidationRuleAction" class="org.hisp.dhis.sm.action.GatValidationRuleAction">
			<param name="page">/dhis-web-synchmanager/showValidationRule.vm</param>
			<result name="success" type="velocity">/content.vm</result>
		</action>

		<action name="updateApproveDEStatus"
			class="org.hisp.dhis.sm.action.UpdateApproveDEStatusAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/updateApproveStatusResult.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
		</action>

		<action name="updateApproveINDStatus"
			class="org.hisp.dhis.sm.action.UpdateApproveIndicatorAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/updateApproveStatusResult.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
		</action>

		<action name="updateApproveOrgUnitAction"
			class="org.hisp.dhis.sm.action.UpdateApproveOrgUnitAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/updateApproveStatusResult.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
		</action>

		<action name="updateApproveValidationRuleAction"
			class="org.hisp.dhis.sm.action.UpdateApproveValidationRuleAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/updateApproveStatusResult.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
		</action>

		<!-- Meta Data Synch Log Report form -->
		<action name="metaDataSynchLogReport"
			class="org.hisp.dhis.sm.action.MetaDataSynchLogReportFormAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-synchmanager/metaDataLogReportForm.vm</param>
			<param name="menu">/dhis-web-synchmanager/menu.vm</param>
			<param name="requiredAuthorities">F_SYNCHMANAGER_LOG_REPORT</param>
		</action>

		<!-- Load Meta Data Log Report -->
		<action name="generateMetaDataLogSynchReportResult"
			class="org.hisp.dhis.sm.action.GenerateMetaDataSynchLogReportResultAction">
			<result name="success" type="velocity">/content.vm</result>
			<param name="page">/dhis-web-synchmanager/loadMetaDataLogReport.vm</param>
			<param name="requiredAuthorities">F_SYNCHMANAGER_LOG_REPORT</param>
		</action>

        <action name="exportToWorkBook" class="org.hisp.dhis.sm.action.ExportToExcelAction">
	        <result name="success" type="stream">
	            <param name="contentType">application/vnd.ms-excel</param>
	            <param name="inputName">inputStream</param>
	            <param name="contentDisposition">attachment;filename="${fileName}"</param>
	            <param name="bufferSize">1024</param>
	        </result>
        </action>


	</package>
</struts>