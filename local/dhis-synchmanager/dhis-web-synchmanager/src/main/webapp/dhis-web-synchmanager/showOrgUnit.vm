
<script type="text/javascript">
    /*    function closeDialog()
        {
            jQuery('#OrgUnitPopup').dialog('destroy').remove();
        } */

    $(document).ready(function() {

        $(document).ready(function() {
            $('.showORGmultiselect').multiselect({
                includeSelectAllOption: true,
                maxHeight: 150,
                numberDisplayed: 1,
                buttonWidth: '150px'

            });
        });
    });

</script>

<form id="popup_update" action="updateApproveOrgUnitAction.action">

    <div align="right"><input type="submit" value="Update Orgnisation Sync Status" ></div>

    <input type="hidden" name="searchOrgId" id="searchOrgId" value="${organisationUnitObject.getId()}" >

    <table class="listTable" style="border: 1px solid" >
        <thead>
        <th style="text-align: center; border: 1px solid"  width="400">
            New/Updated Orgnisation Unit
        </th>
        <th style="text-align: center; border: 1px  solid"  width="100">
            Approval needed after updation
        </th>
        <th style="text-align: center; border: 1px  solid"  width="150">
            Instances
        </th>
        <th style="text-align: center; border: 1px  solid"  width="100">
            Approve Status
        </th>
        </thead>
    <tr>
        #if($AllOrgUnits.size() == 0)
            <tbody>
            <tr id="tr${organisationUnitObject.getId()}" data-id="$!organisationUnitObject.getId()" data-uid="$!organisationUnitObject.getUid()"
                data-type="ApprovalOrgUnits" data-name="$encoder.htmlEncode( $!organisationUnitObject.getName() )">

                <td style="text-align: left; border: 1px solid">$encoder.htmlEncode( $organisationUnitObject.getName())</td>

                <td style="text-align: center; border: 1px solid">
                    <input type="checkbox" name="appNeeded_${organisationUnitObject.getId()}" />
                </td>

                <td style="text-align: center; border: 1px solid">
                    <select class="showORGmultiselect" multiple="multiple" id="sel${velocityCount}" name="instances_${organisationUnitObject.id}">
                        #foreach( $instance in $synchInstances )
                            <option value="$instance.id" >$encoder.htmlEncode( $instance.name )</option>
                        #end
                    </select>
                </td>

                <td style="text-align: center; border: 1px solid" >
                    <input type="checkbox" id="approveStatus_${organisationUnitObject.getId()}" name="approveStatus_${organisationUnitObject.getId()}"  />
                </td>

            </tr>
            </tbody>
        #else
            <tbody>
                #foreach( $Orgsync in $AllOrgUnits )
                <tr id="tr${Orgsync.getOrganisationUnit().getId()}" data-id="$!Orgsync.getOrganisationUnit().getId()" data-uid="$!Orgsync.getOrganisationUnit().getUid()"
                    data-type="ApprovalOrgUnits" data-name="$encoder.htmlEncode( $!Orgsync.getOrganisationUnit().getName() )">

                    <td style="text-align: left; border: 1px solid">$encoder.htmlEncode( $Orgsync.getOrganisationUnit().getName())</td>

                    #if($Orgsync.getRememberApproveStatus())
                        <td style="text-align: center; border: 1px solid">
                            <input type="checkbox" name="upappNeeded_${Orgsync.getOrganisationUnit().getId()}" checked />
                        </td>
                    #else
                        <td style="text-align: center; border: 1px solid">
                            <input type="checkbox" name="upappNeeded_${Orgsync.getOrganisationUnit().getId()}" />
                        </td>
                    #end

                    <td style="text-align: left; border: 1px solid"> <label id="instance" name="upinstances_${Orgsync.getOrganisationUnit().getId()}">
                        $encoder.htmlEncode( $Orgsync.getInstance().getName() )</label></td>

                    #if($Orgsync.getApproveStatus())
                        <td style="text-align: center; border: 1px solid" >
                            <input type="checkbox" id="upapproveStatus_${Orgsync.getOrganisationUnit().getId()}"  name="upapproveStatus_${Orgsync.getOrganisationUnit().getId()}" checked />
                        </td>
                    #else
                        <td style="text-align: center; border: 1px solid" >
                            <input type="checkbox" id="upapproveStatus_${Orgsync.getOrganisationUnit().getId()}" name="upapproveStatus_${Orgsync.getOrganisationUnit().getId()}"  />
                        </td>
                    #end
                </tr>
                #end
            #if($instancesLeft.size() != 0)
            <tr id="tr${organisationUnitObject.getId()}" data-id="$!organisationUnitObject.getId()" data-uid="$!organisationUnitObject.getUid()"
                data-type="ApprovalOrgUnits" data-name="$encoder.htmlEncode( $!organisationUnitObject.getName() )">

                <td style="text-align: left; border: 1px solid">$encoder.htmlEncode( $organisationUnitObject.getName())</td>

                <td style="text-align: center; border: 1px solid">
                    <input type="checkbox" name="appNeeded_${organisationUnitObject.getId()}" />
                </td>

                <td style="text-align: center; border: 1px solid">
                    <select class="showORGmultiselect" multiple="multiple" id="sel${velocityCount}" name="instances_${organisationUnitObject.id}">
                        #foreach( $instance in $instancesLeft )
                            <option value="$instance.id" >$encoder.htmlEncode( $instance.name )</option>
                        #end
                    </select>
                </td>

                <td style="text-align: center; border: 1px solid" >
                    <input type="checkbox" id="approveStatus_${organisationUnitObject.getId()}" name="approveStatus_${organisationUnitObject.getId()}"  />
                </td>

            </tr>

            </tbody>
         #end
        #end
        
   <select name="instancesLeft" multiple style="display:none" >
	#foreach( $instance in $instancesLeft )
		<option value="$instance.id" selected >$instance.name</option>	
	#end
	</select>
        </tr>
    </table>
    <br>

</form>
